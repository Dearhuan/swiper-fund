var t=Object.defineProperty,e=(e,r,n)=>(((e,r,n)=>{r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n})(e,"symbol"!=typeof r?r+"":r,n),n);import{B as r,C as n,D as o,r as i,n as s,E as a}from"./@vue-7934978b.js";import{c as l,a as c}from"./vue-router-0505c739.js";import{c as d}from"./vue-i18n-92d282b2.js";import{c as u}from"./pinia-20115b5c.js";import"./@intlify-5d791b8c.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const r of t)if("childList"===r.type)for(const t of r.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const m=(t,e)=>{const r=t.__vccOpts||t;for(const[n,o]of e)r[n]=o;return r};const h=m({},[["render",function(t,e){const i=o("router-view");return r(),n(i)}]]),p={},f=function(t,e,r){if(!e||0===e.length)return t();const n=document.getElementsByTagName("link");return Promise.all(e.map((t=>{if(t=function(t,e){return new URL(t,e).href}(t,r),t in p)return;p[t]=!0;const e=t.endsWith(".css"),o=e?'[rel="stylesheet"]':"";if(!!r)for(let r=n.length-1;r>=0;r--){const o=n[r];if(o.href===t&&(!e||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${t}"]${o}`))return;const i=document.createElement("link");return i.rel=e?"stylesheet":"modulepreload",e||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),e?new Promise(((e,r)=>{i.addEventListener("load",e),i.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${t}`))))})):void 0}))).then((()=>t()))},g=l({routes:[{name:"notFound",path:"/:path(.*)+",redirect:{name:"home"}},{name:"home",path:"/home",component:()=>f((()=>import("./index-87cceba8.js")),["./index-87cceba8.js","./@vue-7934978b.js","./vue-router-0505c739.js","./vue-i18n-92d282b2.js","./@intlify-5d791b8c.js","./useEcharts-642a01ca.js","./echarts-5536e0ce.js","./zrender-6f27ac1d.js","./tslib-ed971494.js","./index-32ac4dc1.js","./pinia-20115b5c.js","../css/index-31652794.css"],import.meta.url),meta:{title:""}},{name:"fund",path:"/fund",component:()=>f((()=>import("./index-738b90ea.js")),["./index-738b90ea.js","./swiper-6cc5bd76.js","./@vue-7934978b.js","./ssr-window-792d0f84.js","./dom7-b6dc17d0.js","../css/swiper-1df8f2af.css","./index-32ac4dc1.js","./index-685b78c2.js","./vue-router-0505c739.js","./vue-i18n-92d282b2.js","./@intlify-5d791b8c.js","./pinia-20115b5c.js","../css/index-ddc8a822.css"],import.meta.url),meta:{title:"",showTabBar:!0}},{name:"weather",path:"/weather",component:()=>f((()=>import("./index-ae0e52cc.js")),["./index-ae0e52cc.js","./@vue-7934978b.js","./swiper-6cc5bd76.js","./ssr-window-792d0f84.js","./dom7-b6dc17d0.js","../css/swiper-1df8f2af.css","./index-685b78c2.js","./useEcharts-642a01ca.js","./echarts-5536e0ce.js","./zrender-6f27ac1d.js","./tslib-ed971494.js","./index-83f2d5b4.js","./pinia-20115b5c.js","./vue-router-0505c739.js","./vue-i18n-92d282b2.js","./@intlify-5d791b8c.js","../css/index-38e16c17.css"],import.meta.url),meta:{title:"天气",showTabBar:!0}},{name:"amap",path:"/amap",component:()=>f((()=>import("./index-cefb6a4c.js")),["./index-cefb6a4c.js","./index-685b78c2.js","./@amap-b47efe50.js","./index-83f2d5b4.js","./pinia-20115b5c.js","./@vue-7934978b.js","./vue-router-0505c739.js","./vue-i18n-92d282b2.js","./@intlify-5d791b8c.js","../css/index-56eb69b6.css"],import.meta.url)}],history:c()});g.beforeEach(((t,e,r)=>{var n;const o=null==(n=null==t?void 0:t.meta)?void 0:n.title;o&&(document.title=o),r()}));const y=d({locale:"en",legacy:!1,messages:{zh:{home:{Fund:"基金",Weather:"天气",Bill:"记账本"},weather:{today:"今天",updated:"更新",city:"城市",temp:"天气",humidity:"湿度",wind:"风向",tips:"提示",forecast:"预报"}},en:{home:{Fund:"Fund",Weather:"Weather",Bill:"Bill"},weather:{today:"Today",updated:"Updated",city:"City",temp:"Temp",humidity:"Humidity",wind:"Wind",tips:"Tips",forecast:"Forecast"}}}});const b=(t,e,r)=>{let n=0,o=t.length-1;for(;n<=o;){const i=Math.floor((n+o)/2),s=r.measureText(t.substring(0,i)).width,a=r.measureText(t.substring(0,i+1)).width;if(s<=e&&a>e)return i;s<e?n=i+1:o=i-1}return-1},v=(t,e)=>{const r=t.getContext("2d"),n=e.textArr||[];let o=[];const i=[];n.forEach((t=>{const n=((t,e,r,n)=>{const o=[];let i=0;n&&(t.font=n);let s=b(e,r,t);for(;-1!==s;)o.push(e.substring(0,s)),e=e.substring(s),i=r,s=b(e,r,t);if(e){o.push(e);const r=t.measureText(e).width;i=0!==i?i:r}return{textArr:o,maxWidth:i}})(r,t+"",e.maxWidth,e.font);o=o.concat(n.textArr),i.push(n.maxWidth)})),i.sort(((t,e)=>e-t));const s=Math.max(i[0],x.minWidth),a=e.lineHeight,l=o.length*a,c=Math.PI*e.deg/180,d=Math.abs(c),u=l*Math.sin(d),m=l*Math.cos(d),h=s*Math.sin(d),p=s*Math.cos(d);t.width=parseInt(u+p+e.marginRight+"",10),t.height=parseInt(h+m+e.marginBottom+"",10),r.font=e.font,r.fillStyle=e.fillStyle,r.textBaseline="hanging",r.translate(0,h),r.rotate(c),o.forEach(((t,e)=>{r.fillText(t,0,a*e)}))};let x=new class{constructor(t){e(this,"textArr",["test","自定义水印"]),e(this,"font",'16px "微软雅黑"'),e(this,"fillStyle","rgba(170,170,170,0.4)"),e(this,"maxWidth",200),e(this,"minWidth",120),e(this,"lineHeight",24),e(this,"deg",-45),e(this,"marginRight",120),e(this,"marginBottom",40),e(this,"left",20),e(this,"top",20),e(this,"opacity",".75"),e(this,"position","fixed"),t&&Object.assign(this,t)}};const w=function(t,e){x=Object.assign({},x,e.value||{}),x.minWidth=Math.min(x.maxWidth,x.minWidth);const r=x.textArr;if(!(n=r)||!Array.isArray(n))throw Error("水印文本必须放在数组中！");var n;const o=(()=>{const t=document.createElement("canvas");return t.style.display="none",document.body.appendChild(t),t})();v(o,x),((t,e)=>{if((t=>void 0!==t)(e)){const r=t.toDataURL("image/png"),n=e;n.style.cssText=`position: ${x.position}; left:0; top:0; right:0; bottom:0; z-index:9999; pointer-events:none;opacity:${x.opacity}`,n.style.backgroundImage="url("+r+")",n.style.backgroundPosition=x.left+"px "+x.top+"px"}})(o,t)},_=i(),E={beforeMount(t,e){w(t,e)},mounted(t,e){s((()=>{(t=>{const e=new(0,window.MutationObserver)((function(t,e){for(let r of t)switch(r.type){case"childList":r.removedNodes.length>0&&r.target.append(r.removedNodes[0]);break;case"attributes":r.target.setAttribute("style",r.target.oldValue)}}));e.observe(t,{attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0}),_.value=e})(t)}))},beforeUnmount(){_.value&&(_.value.disconnect(),_.value=null)}},T=a(h),L=u();T.use(g).use(y).use(L).directive("water-mask",E).mount("#app");export{m as _};

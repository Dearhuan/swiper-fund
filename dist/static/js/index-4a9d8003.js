var t=Object.defineProperty,e=(e,n,r)=>(((e,n,r)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r})(e,"symbol"!=typeof n?n+"":n,r),r);import{o as n,c as r,r as o,a as i,b as s,d as a,e as l,n as c,f as d,g as u}from"./.pnpm-ccbe002d.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const m=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n};const h=m({},[["render",function(t,e){const i=o("router-view");return n(),r(i)}]]),p={},f=function(t,e,n){if(!e||0===e.length)return t();const r=document.getElementsByTagName("link");return Promise.all(e.map((t=>{if(t=function(t,e){return new URL(t,e).href}(t,n),t in p)return;p[t]=!0;const e=t.endsWith(".css"),o=e?'[rel="stylesheet"]':"";if(!!n)for(let n=r.length-1;n>=0;n--){const o=r[n];if(o.href===t&&(!e||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${t}"]${o}`))return;const i=document.createElement("link");return i.rel=e?"stylesheet":"modulepreload",e||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),e?new Promise(((e,n)=>{i.addEventListener("load",e),i.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${t}`))))})):void 0}))).then((()=>t()))},g=i({routes:[{name:"notFound",path:"/:path(.*)+",redirect:{name:"home"}},{name:"home",path:"/home",component:()=>f((()=>import("./index-d97f0b9a.js")),["./index-d97f0b9a.js",".pnpm-ccbe002d.js","..\\css\\.pnpm-1df8f2af.css","./useEcharts-0f6947fa.js","./index-32ac4dc1.js","..\\css\\index-af86c269.css"],import.meta.url),meta:{title:""}},{name:"fund",path:"/fund",component:()=>f((()=>import("./index-fa6d4044.js")),["./index-fa6d4044.js",".pnpm-ccbe002d.js","..\\css\\.pnpm-1df8f2af.css","./index-32ac4dc1.js","./index-685b78c2.js","..\\css\\index-58ed5504.css"],import.meta.url),meta:{title:"",showTabBar:!0}},{name:"weather",path:"/weather",component:()=>f((()=>import("./index-e9eaa160.js")),["./index-e9eaa160.js",".pnpm-ccbe002d.js","..\\css\\.pnpm-1df8f2af.css","./index-685b78c2.js","./useEcharts-0f6947fa.js","./index-5290cddb.js","..\\css\\index-498bda89.css"],import.meta.url),meta:{title:"天气",showTabBar:!0}},{name:"amap",path:"/amap",component:()=>f((()=>import("./index-e8a8819e.js")),["./index-e8a8819e.js","./index-685b78c2.js",".pnpm-ccbe002d.js","..\\css\\.pnpm-1df8f2af.css","./index-5290cddb.js","..\\css\\index-4b353603.css"],import.meta.url)}],history:s()});g.beforeEach(((t,e,n)=>{var r;const o=null==(r=null==t?void 0:t.meta)?void 0:r.title;o&&(document.title=o),n()}));const y=a({locale:"en",legacy:!1,messages:{zh:{home:{Fund:"基金",Weather:"天气",Bill:"记账本"},weather:{today:"今天",updated:"更新",city:"城市",temp:"天气",humidity:"湿度",wind:"风向",tips:"提示",forecast:"预报"}},en:{home:{Fund:"Fund",Weather:"Weather",Bill:"Bill"},weather:{today:"Today",updated:"Updated",city:"City",temp:"Temp",humidity:"Humidity",wind:"Wind",tips:"Tips",forecast:"Forecast"}}}});const b=(t,e,n)=>{let r=0,o=t.length-1;for(;r<=o;){const i=Math.floor((r+o)/2),s=n.measureText(t.substring(0,i)).width,a=n.measureText(t.substring(0,i+1)).width;if(s<=e&&a>e)return i;s<e?r=i+1:o=i-1}return-1},x=(t,e)=>{const n=t.getContext("2d"),r=e.textArr||[];let o=[];const i=[];r.forEach((t=>{const r=((t,e,n,r)=>{const o=[];let i=0;r&&(t.font=r);let s=b(e,n,t);for(;-1!==s;)o.push(e.substring(0,s)),e=e.substring(s),i=n,s=b(e,n,t);if(e){o.push(e);const n=t.measureText(e).width;i=0!==i?i:n}return{textArr:o,maxWidth:i}})(n,t+"",e.maxWidth,e.font);o=o.concat(r.textArr),i.push(r.maxWidth)})),i.sort(((t,e)=>e-t));const s=Math.max(i[0],v.minWidth),a=e.lineHeight,l=o.length*a,c=Math.PI*e.deg/180,d=Math.abs(c),u=l*Math.sin(d),m=l*Math.cos(d),h=s*Math.sin(d),p=s*Math.cos(d);t.width=parseInt(u+p+e.marginRight+"",10),t.height=parseInt(h+m+e.marginBottom+"",10),n.font=e.font,n.fillStyle=e.fillStyle,n.textBaseline="hanging",n.translate(0,h),n.rotate(c),o.forEach(((t,e)=>{n.fillText(t,0,a*e)}))};let v=new class{constructor(t){e(this,"textArr",["test","自定义水印"]),e(this,"font",'16px "微软雅黑"'),e(this,"fillStyle","rgba(170,170,170,0.4)"),e(this,"maxWidth",200),e(this,"minWidth",120),e(this,"lineHeight",24),e(this,"deg",-45),e(this,"marginRight",120),e(this,"marginBottom",40),e(this,"left",20),e(this,"top",20),e(this,"opacity",".75"),e(this,"position","fixed"),t&&Object.assign(this,t)}};const w=function(t,e){v=Object.assign({},v,e.value||{}),v.minWidth=Math.min(v.maxWidth,v.minWidth);const n=v.textArr;if(!(r=n)||!Array.isArray(r))throw Error("水印文本必须放在数组中！");var r;const o=(()=>{const t=document.createElement("canvas");return t.style.display="none",document.body.appendChild(t),t})();x(o,v),((t,e)=>{if((t=>void 0!==t)(e)){const n=t.toDataURL("image/png"),r=e;r.style.cssText=`position: ${v.position}; left:0; top:0; right:0; bottom:0; z-index:9999; pointer-events:none;opacity:${v.opacity}`,r.style.backgroundImage="url("+n+")",r.style.backgroundPosition=v.left+"px "+v.top+"px"}})(o,t)},_=l(),E={beforeMount(t,e){w(t,e)},mounted(t,e){c((()=>{(t=>{const e=new(0,window.MutationObserver)((function(t,e){for(let n of t)switch(n.type){case"childList":n.removedNodes.length>0&&n.target.append(n.removedNodes[0]);break;case"attributes":n.target.setAttribute("style",n.target.oldValue)}}));e.observe(t,{attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0}),_.value=e})(t)}))},beforeUnmount(){_.value&&(_.value.disconnect(),_.value=null)}},T=d(h),L=u();T.use(g).use(y).use(L).directive("water-mask",E).mount("#app");export{m as _};
